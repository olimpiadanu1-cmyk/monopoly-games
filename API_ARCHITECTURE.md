# üöÄ API Architecture - Monopoly Game

## üìã –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å API —Å–µ—Ä–≤–µ—Ä–æ–º

### üîÑ **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** ‚Üí JavaScript –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å Python API —Å–µ—Ä–≤–µ—Ä–∞
2. **–î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Üí –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ API
3. **localStorage** ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ backup –∏ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### üèóÔ∏è **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:**

#### 1. **API –°–µ—Ä–≤–µ—Ä** (`api_server.py`)
- **–ü–æ—Ä—Ç**: 5000
- **–§—É–Ω–∫—Ü–∏–∏**:
  - `GET /api/status` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
  - `GET /api/data/{type}` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞
  - `POST /api/data/{type}` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  - `GET /api/all-data` - –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö —Å—Ä–∞–∑—É

#### 2. **API –ö–ª–∏–µ–Ω—Ç** (`api_client.js`)
- **–ö–ª–∞—Å—Å**: `MonopolyAPI`
- **–§—É–Ω–∫—Ü–∏–∏**:
  - `checkStatus()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
  - `loadData(type)` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  - `saveData(type, data)` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  - `loadAllData()` - –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
  - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ç–∞–π–º–∞—É—Ç–æ–º 5 —Å–µ–∫—É–Ω–¥

#### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π script.js**
- **–ó–∞–≥—Ä—É–∑–∫–∞**: `loadAllDataFromServer()` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: `saveToServer()` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- **Fallback**: `loadFromLocalStorage()` - –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### üìä **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:**

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –§–∞–π–ª |
|-----|----------|------|
| `users` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ | `data/users.json` |
| `applications` | –ó–∞—è–≤–∫–∏ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é | `data/applications.json` |
| `purchase_requests` | –ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–∫—É–ø–∫—É | `data/purchase_requests.json` |
| `task_submissions` | –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è | `data/task_submissions.json` |
| `reward_history` | –ò—Å—Ç–æ—Ä–∏—è –Ω–∞–≥—Ä–∞–¥ | `data/reward_history.json` |
| `leaderboard` | –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ | `data/leaderboard.json` |
| `cell_tasks` | –ó–∞–¥–∞–Ω–∏—è –¥–ª—è –∫–ª–µ—Ç–æ–∫ | `data/cell_tasks.json` |
| `game_states` | –ò–≥—Ä–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è | `data/game_states.json` |
| `shop_items` | –¢–æ–≤–∞—Ä—ã –º–∞–≥–∞–∑–∏–Ω–∞ | `data/shop_items.json` |
| `shopping_carts` | –ö–æ—Ä–∑–∏–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | `data/shopping_carts.json` |

### üîÑ **–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí JavaScript ‚Üí API –ö–ª–∏–µ–Ω—Ç ‚Üí Python API ‚Üí JSON —Ñ–∞–π–ª—ã
     ‚Üë                                                      ‚Üì
localStorage (backup) ‚Üê JavaScript ‚Üê API –ö–ª–∏–µ–Ω—Ç ‚Üê Python API
```

### ‚ö° **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**

1. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ JSON —Ñ–∞–π–ª–∞—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - localStorage –∫–∞–∫ backup –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
4. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### üöÄ **–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã:**

#### Windows:
```bash
# –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞
python api_server.py

# –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
python -m http.server 3000

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
start.bat
```

#### Linux/Mac:
```bash
# –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞
python3 api_server.py

# –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
python3 -m http.server 3000

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
./start.sh
```

### üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl http://localhost:5000/api/status

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
curl http://localhost:5000/api/data/users

# –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
curl http://localhost:5000/api/all-data
```

### üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è production:**

1. **–ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç** –≤ `api_server.py` –∏ `api_client.js`
2. **–î–æ–±–∞–≤—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** –¥–ª—è API
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** –≤–º–µ—Å—Ç–æ JSON —Ñ–∞–π–ª–æ–≤
5. **–î–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### üìù **–õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**

- `üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞...` - –Ω–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏
- `‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å —Å–µ—Ä–≤–µ—Ä–∞` - —É—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- `‚ö†Ô∏è –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º localStorage` - fallback
- `üíæ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage` - backup —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- `‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä` - —É—Å–ø–µ—à–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

---

**–¢–µ–ø–µ—Ä—å –≤–∞—à–∞ –∏–≥—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º API —Å–µ—Ä–≤–µ—Ä–æ–º! üéâ**

